<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <title>SBB-Uhr & Lampensteuerung</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

</head>
<body class="bg-light">

<div class="container py-5">
  <div class="card shadow-lg p-4">
    <div class="card-body text-center">

      <!-- Bild -->
      <img src="https://www.blog.mobatime.ch/hs-fs/hubfs/Bilder/Blog/sbb_sekunden.gif?width=392&height=396&name=sbb_sekunden.gif"
           class="img-fluid mx-auto d-block mb-3"
           alt="SBB Uhr"
           width="120">

      <h1 class="h4 mb-2">SBB-Uhr Steuerung</h1>

      <!-- Live Uhr -->
      <h2 class="h5 text-muted mb-4" id="clock"></h2>
      <h2 class="h5 text-muted mb-4">{{ server_time }}</h2>



                <!-- Eingabe-Feld f√ºr Zeit -->
                <div class="mt-4 mb-4">
                  <form action="/set_time" method="post" class="row g-2 justify-content-center">
                    <div class="col-auto d-flex align-items-center">
                        <label for="user_time" class="form-label fw-bold">Uhr zeigt</label>
                    </div>
                    <div class="col-auto">
                      <input type="time" name="user_time" class="form-control form-control-lg" required>
                    </div>
                    <div class="col-auto">
                      <button type="submit" class="btn btn-outline-secondary btn-lg">‚è∞ Zeit setzen</button>
                    </div>
                  </form>
                </div>

                <!-- Buttons -->
				<center>

				<div class="form-check form-switch d-flex justify-content-center my-4">
					<form id="on_off_form" action="{% if clock_started %}/stop_timer{% else %}/start_timer{% endif %}" method="post">
						<input class="form-check-input" type="checkbox" id="tickSwitch" name="tickSwitch" {% if clock_started %}checked{% endif %} onchange="document.getElementById('on_off_form').submit();">
						<label class="form-check-label fw-bold ms-2" for="tickSwitch"> Clock {% if clock_started %}aktiv{% else %}inaktiv{% endif %}</label>
					</form>
				</div>

				<div class="form-check form-switch d-flex justify-content-center my-4">
					<form id="suspend_form" action="{% if aktion_aktiv %}/suspend{% else %}/activate{% endif %}" method="post">
						<input class="form-check-input" type="checkbox" id="tickSwitch" name="tickSwitch" {% if aktion_aktiv %}checked{% endif %} onchange="document.getElementById('suspend_form').submit();">
						<label class="form-check-label fw-bold ms-2" for="tickSwitch"> Tick {% if aktion_aktiv %}aktiv{% else %}suspendiert{% endif %}</label>
					</form>
				</div>

                </center>
      <h1 class="mb-4">üí° Lampensteuerung</h1>

      <form action="{{ url_for('toggle_lampe') }}" method="post">
        {% if lampe_an %}
          <button type="submit" class="btn btn-warning  btn-lg px-5 py-3">
            <i class="bi bi-lightbulb-fill"></i> Lampe An (Klicken zum Ausschalten)
          </button>
        {% else %}
          <button type="submit" class="btn btn-secondary btn-lg px-5 py-3">
            <i class="bi bi-lightbulb-off"></i> Lampe Aus (Klicken zum Einschalten)
          </button>
        {% endif %}
      </form>

      <!-- JSON Status Button -->
      <form action="{{ url_for('status_JSON') }}" method="get" class="mt-4">
        <button type="submit" class="btn btn-outline-primary btn-lg">
          Status als JSON abrufen
        </button>
      </form>

    </div>
  </div>
</div>

<!-- JS f√ºr Uhr -->
<script>
  function updateClock() {
    const now = new Date();
    const options = {
      day: '2-digit', month: 'long', year: 'numeric',
      hour: '2-digit', minute: '2-digit', second: '2-digit'
    };
    document.getElementById("clock").textContent = now.toLocaleString("de-DE", options);
  }
  setInterval(updateClock, 1000);
  updateClock();
</script>

</body>
</html>
