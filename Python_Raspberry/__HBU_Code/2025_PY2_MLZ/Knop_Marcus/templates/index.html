<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <title>Sense HAT – Übersicht</title>
  <style>
    body { font-family: system-ui, Arial, sans-serif; margin: 20px; background: #f6f8fb; color: #222; }
    h1 { color: #0b5ed7; margin-bottom: 0 }
    .sub { color: #555; margin-top: 4px }
    a.btn, button.btn {
      display: inline-block; margin: 6px 6px 6px 0; padding: 8px 12px;
      background: #0d6efd; color: #fff; border-radius: 6px; text-decoration: none; border: none; cursor: pointer;
    }
    a.btn:hover, button.btn:hover { background: #0b5ed7; }
    .card { background:#fff; border:1px solid #e5e7eb; border-radius:10px; padding:14px; margin:14px 0; }
    .ok { color: #22a06b; font-weight: 700 }
    .bad { color: #d6336c; font-weight: 700 }
    code { background:#eef2f7; padding:2px 6px; border-radius:4px }
    ul { margin: 8px 0 0 20px }
    hr { border: none; border-top: 1px solid #e5e7eb; margin: 18px 0 }
    .logs { font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace; white-space: pre-wrap; }
  </style>
</head>
<body>
  <h1>Sense HAT – Testseite</h1>
  <div class="sub">Version: {{ version }}</div>

  <div class="card">
    <h3>Status & Navigation</h3>
    <a class="btn" href="/get_status">/get_status</a>
    <a class="btn" href="/LED_Matrix_Tester">LED Matrix Tester</a>
    <a class="btn" href="/clear?colour=black">Matrix löschen</a>
  </div>

  <div class="card">
    <h3>Implementierte Endpoints – Test-Cases</h3>
    <ul>
      <li>set_rotation() – {% if checks_ok %}<span class="ok">✅</span>{% else %}❌{% endif %}</li>
      <li>flip_h() – {% if checks_ok %}<span class="ok">✅</span>{% else %}❌{% endif %}</li>
      <li>flip_v() – {% if checks_ok %}<span class="ok">✅</span>{% else %}❌{% endif %}</li>
      <li>get_pixels() – {% if checks_ok %}<span class="ok">✅</span>{% else %}❌{% endif %}</li>
      <li>set_pixel() (mit Out-of-Bounds-Clamping) – {% if checks_ok %}<span class="ok">✅</span>{% else %}❌{% endif %}</li>
      <li>get_pixel() – {% if checks_ok %}<span class="ok">✅</span>{% else %}❌{% endif %}</li>
      <li>show_message() – {% if checks_ok %}<span class="ok">✅</span>{% else %}❌{% endif %}</li>
      <li>get_temperature()/get_temprature() – {% if checks_ok %}<span class="ok">✅</span>{% else %}❌{% endif %}</li>
      <li>get_pressure() – {% if checks_ok %}<span class="ok">✅</span>{% else %}❌{% endif %}</li>
      <li>get_humidity() – {% if checks_ok %}<span class="ok">✅</span>{% else %}❌{% endif %}</li>
      <li>get_meteo_sensor_values() – {% if checks_ok %}<span class="ok">✅</span>{% else %}❌{% endif %}</li>
      <li>get_weather() – {% if checks_ok %}<span class="ok">✅</span>{% else %}❌{% endif %}</li>
      <li>draw_line() – {% if checks_ok %}<span class="ok">✅</span>{% else %}❌{% endif %}</li>
      <li>MySenseHat Class verwendet – {% if checks_ok %}<span class="ok">✅</span>{% else %}❌{% endif %}</li>
    </ul>
    <p>Hinweis: <code>/get_temprature</code> existiert zusätzlich als Tippfehler-kompatibles Alias für die Tests.</p>
  </div>

  <div class="card">
    <h3>Beispiele</h3>
    <ul>
      <li><a class="btn" href="/set_rotation?angle=90">/set_rotation?angle=90</a></li>
      <li><a class="btn" href="/flip_h">/flip_h</a> <a class="btn" href="/flip_v">/flip_v</a></li>
      <li><a class="btn" href="/set_pixel?x=3&y=2&r=255&g=0&b=128">/set_pixel r,g,b</a></li>
      <li><a class="btn" href="/set_pixel?x=10&y=-3&colour=#00ff66">/set_pixel (Out-of-Bounds + Hex)</a></li>
      <li><a class="btn" href="/get_pixel?x=3&y=2">/get_pixel</a></li>
      <li><a class="btn" href="/draw_line?x1=0&y1=0&x2=7&y2=7&colour=lightblue">/draw_line</a></li>
      <li><a class="btn" href="/show_message?text=Hello&speed=0.08&text_colour=yellow&back_colour=black">/show_message</a></li>
      <li><a class="btn" href="/get_meteo_sensor_values">/get_meteo_sensor_values</a></li>
      <li><a class="btn" href="/get_weather">/get_weather</a></li>
    </ul>
  </div>

  <div class="card">
    <h3>Log</h3>
    <div class="logs">
      {% for line in request_log %}
- {{ line }}
      {% endfor %}
    </div>
  </div>
</body>
</html>
